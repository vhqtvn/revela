on:
  workflow_run:
    workflows: ["Build+Push Images"]
    types: [completed]
    branches:
      - devnet
      - testnet

permissions:
  contents: read
  id-token: write #required for GCP Workload Identity federation

jobs:
  copy-images-to-docker-hub:
    if: ${{ github.event.workflow_run.conclusion == 'success' }}
    uses: ./.github/workflows/copy-images-to-dockerhub.yaml
    with:
      image_tag_prefix: ${{ GITHUB_REF_NAME }}
    secrets: inherit
