{
  "uid": "mempool",
  "slug": "",
  "title": "Mempool",
  "originalTitle": "",
  "tags": [],
  "style": "dark",
  "timezone": "",
  "editable": true,
  "hideControls": false,
  "sharedCrosshair": false,
  "panels": [
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 0 },
      "id": 18,
      "isNew": false,
      "span": 0,
      "title": "Overview",
      "transparent": false,
      "type": "row",
      "panels": [],
      "collapsed": false
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 1 },
      "id": 2,
      "isNew": false,
      "span": 0,
      "title": "Mempool size",
      "description": "total number of transactions in mempool",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "B",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "aptos_core_mempool_index_size{chain_name=~\"$chain_name\", namespace=~\"$namespace\", index=\"system_ttl\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}",
          "intervalFactor": 1,
          "legendFormat": "{{kubernetes_pod_name}}:{{role}}",
          "format": "time_series"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "min": 0,
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisLabel": "txns",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 1 },
      "id": 120,
      "isNew": false,
      "span": 0,
      "title": "Avg E2E Txn Commit Latency",
      "description": "The time between Mempool receiving the transaction and time to be committed.",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "rate(aptos_core_mempool_txn_commit_latency_sum{chain_name=~\"$chain_name\", namespace=~\"$namespace\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\", stage=\"commit_accepted\"}[$interval]) / rate(aptos_core_mempool_txn_commit_latency_count{chain_name=~\"$chain_name\", namespace=~\"$namespace\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\", stage=\"commit_accepted\"}[$interval])",
          "legendFormat": "{{kubernetes_pod_name}}"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "s",
          "min": 0,
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 1 },
      "id": 74,
      "isNew": false,
      "span": 0,
      "title": "Active Upstream Peers",
      "description": "number of live peers a node can broadcast to in each network",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "sum by (kubernetes_pod_name, role, network) (aptos_mempool_active_upstream_peers_count{chain_name=~\"$chain_name\", namespace=~\"$namespace\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"})",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}}  ({{network}} network)"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "min": 0,
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 9 },
      "id": 58,
      "isNew": false,
      "span": 0,
      "title": "Indexes",
      "transparent": false,
      "type": "row",
      "panels": [],
      "collapsed": false
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 10 },
      "id": 121,
      "isNew": false,
      "span": 0,
      "title": "Mempool size (bytes)",
      "description": "total size in bytes of transactions in mempool",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "B",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "aptos_core_mempool_index_size{chain_name=~\"$chain_name\", namespace=~\"$namespace\", index=\"size_bytes\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}",
          "intervalFactor": 1,
          "legendFormat": "{{kubernetes_pod_name}}:{{role}}",
          "format": "time_series"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "bytes",
          "min": 0,
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisLabel": "bytes",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 10 },
      "id": 102,
      "isNew": false,
      "span": 0,
      "title": "Priority Index",
      "description": "transactions ready for consensus",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "aptos_core_mempool_index_size{chain_name=~\"$chain_name\", namespace=~\"$namespace\", index=\"priority\", role=\"validator\", kubernetes_pod_name=~\"$kubernetes_pod_name\"}",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}}"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisLabel": "# keys",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 10 },
      "id": 100,
      "isNew": false,
      "span": 0,
      "title": "Timeline Index",
      "description": "number of transactions ready for broadcast in core mempool ",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "aptos_core_mempool_index_size{chain_name=~\"$chain_name\", namespace=~\"$namespace\", index=\"timeline\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}}"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisLabel": "# keys",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 18 },
      "id": 72,
      "isNew": false,
      "span": 0,
      "title": "Parking Lot Index",
      "description": "number of transactions in parking lot index. These transactions are not ready for broadcast or consensus",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "aptos_core_mempool_index_size{chain_name=~\"$chain_name\", namespace=~\"$namespace\", index=\"parking_lot\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}}"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisLabel": "# keys",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 26 },
      "id": 18,
      "isNew": false,
      "span": 0,
      "title": "Transaction Insertion",
      "transparent": false,
      "type": "row",
      "panels": [],
      "collapsed": false
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 27 },
      "id": 28,
      "isNew": false,
      "span": 0,
      "title": "Received",
      "description": "rate of new transactions received from other peers or JSON-RPC",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "sum by (kubernetes_pod_name, role, network, sender) (rate(aptos_shared_mempool_transactions_processed{chain_name=~\"$chain_name\", namespace=~\"$namespace\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval]))",
          "intervalFactor": 1,
          "legendFormat": "{{kubernetes_pod_name}}:{{role}} \u003c- ({{network}} network, {{sender}})",
          "format": "time_series"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "min": 0,
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisLabel": "txns/s",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 27 },
      "id": 30,
      "isNew": false,
      "span": 0,
      "title": "VM Validation Succeeded",
      "description": "rate of transactions that were successfully validated before mempool insertion\n",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "sum by (kubernetes_pod_name, role, network, sender) (rate(aptos_shared_mempool_transactions_processed{chain_name=~\"$chain_name\", namespace=~\"$namespace\", status!=\"vm_validation\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval]))",
          "intervalFactor": 1,
          "legendFormat": "{{kubernetes_pod_name}}:{{role}} \u003c- ({{network}} network:{{sender}})",
          "format": "time_series"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "min": 0,
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisLabel": "txns/s",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 27 },
      "id": 94,
      "isNew": false,
      "span": 0,
      "title": "VM Validation Failed",
      "description": "rate of submitted txns that failed to pass the VM validation",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "sum by (kubernetes_pod_name, role, network, sender) (rate(aptos_shared_mempool_transactions_processed{chain_name=~\"$chain_name\", namespace=~\"$namespace\", status=\"vm_validation\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval]))",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}} \u003c- ({{network}} network:{{sender}})"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisLabel": "txn / s",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 35 },
      "id": 93,
      "isNew": false,
      "span": 0,
      "title": "Duplicate (Idempotent)",
      "description": "Rate at which duplicate (idempotent) txns are received at mempool",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "rate(aptos_core_mempool_idempotent_txns_count{chain_name=~\"$chain_name\", namespace=~\"$namespace\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval])",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}}"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisLabel": "txns/s",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 35 },
      "id": 16,
      "isNew": false,
      "span": 0,
      "title": "Insertion Succeeded",
      "description": "rate of mempool insertion of txn",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "sum by (kubernetes_pod_name, role, status) (rate(aptos_shared_mempool_transactions_processed{chain_name=~\"$chain_name\", namespace=~\"$namespace\", status=\"success\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval]))",
          "intervalFactor": 1,
          "legendFormat": "{{kubernetes_pod_name}}:{{role}} - {{status}}",
          "format": "time_series"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "min": 0,
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisLabel": "txns / sec",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 35 },
      "id": 96,
      "isNew": false,
      "span": 0,
      "title": "Insertion Failed",
      "description": "rate of transactions that passed VM validation but were rejected from mempool",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "rate(aptos_shared_mempool_transactions_processed{chain_name=~\"$chain_name\", namespace=~\"$namespace\", status!=\"success\", status!=\"vm_validation\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval])",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}} \u003c- ({{network}} network:{{sender}}) -  {{status}}"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisLabel": "failures / s",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "editable": false,
      "error": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 43 },
      "id": 124,
      "isNew": false,
      "span": 0,
      "title": "Transaction Removal",
      "transparent": false,
      "type": "row",
      "panels": [],
      "collapsed": false
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 44 },
      "id": 8,
      "isNew": false,
      "span": 0,
      "title": "Commit Succeeded",
      "description": "Rate of accepted transactions committed per second (notified from state sync)",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "rate(aptos_mempool_service_transactions_sum{chain_name=~\"$chain_name\", namespace=~\"$namespace\", type=\"commit_accepted\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval])\n",
          "intervalFactor": 1,
          "legendFormat": "{{kubernetes_pod_name}}:{{role}}",
          "format": "time_series"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "min": 0,
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisLabel": "accepted txns / sec",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 44 },
      "id": 44,
      "isNew": false,
      "span": 0,
      "title": "Commit Rejected",
      "description": "rate of rejected committed transactions (notified from consensus)",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "rate(aptos_mempool_service_transactions_sum{chain_name=~\"$chain_name\", namespace=~\"$namespace\", type=\"commit_rejected\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval])\n",
          "legendFormat": "{{kubernetes_pod_name}}"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisLabel": "txns/sec",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 44 },
      "id": 92,
      "isNew": false,
      "span": 0,
      "title": "Removal Rate",
      "description": "Rate at which txns are removed (via commit) from mempool",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "rate(aptos_core_mempool_removed_txns_count{chain_name=~\"$chain_name\", namespace=~\"$namespace\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval])",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}}"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "min": 0,
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisLabel": "txns/s",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 52 },
      "id": 60,
      "isNew": false,
      "span": 0,
      "title": "Client-expired",
      "description": "rate of number of transactions that expired in mempool based on client-specified expiration time",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "rate(aptos_core_mempool_gc_latency_count{chain_name=~\"$chain_name\", namespace=~\"$namespace\", type=\"client_expiration\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval])",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}} : {{status}}"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "min": 0,
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisLabel": "txns",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 52 },
      "id": 62,
      "isNew": false,
      "span": 0,
      "title": "System-expired",
      "description": "Rate of number of transactions that expired in mempool based on mempool-specified expiration time",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "rate(aptos_core_mempool_gc_latency_count{chain_name=~\"$chain_name\", namespace=~\"$namespace\", type=\"system_ttl\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval])",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}} : {{status}}"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "min": 0,
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisLabel": "txns",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 60 },
      "id": 34,
      "isNew": false,
      "span": 0,
      "title": "Transaction Broadcasts",
      "transparent": false,
      "type": "row",
      "panels": [],
      "collapsed": false
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 61 },
      "id": 24,
      "isNew": false,
      "span": 0,
      "title": "Broadcast Rate",
      "description": "rate of transactions broadcasted to other peers",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "rate(aptos_shared_mempool_transaction_broadcast_sum{chain_name=~\"$chain_name\", namespace=~\"$namespace\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval])",
          "intervalFactor": 1,
          "legendFormat": "{{kubernetes_pod_name}}:{{role}} -\u003e ({{network}})",
          "format": "time_series"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "min": 0,
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisLabel": "txns/s",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 61 },
      "id": 38,
      "isNew": false,
      "span": 0,
      "title": "Average Broadcast Size",
      "description": "average number of transactions in a single broadcast",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "rate(aptos_shared_mempool_transaction_broadcast_sum{chain_name=~\"$chain_name\", namespace=~\"$namespace\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval]) / rate(aptos_shared_mempool_transaction_broadcast_count{chain_name=~\"$chain_name\", namespace=~\"$namespace\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval])",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}} -\u003e ({{network}})"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "min": 0,
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisLabel": "txns / broadcast",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 61 },
      "id": 48,
      "isNew": false,
      "span": 0,
      "title": "Broadcast Rate (requests/s)",
      "description": "avg number of broadcasts / sec",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "rate(aptos_mempool_broadcast_latency_count{chain_name=~\"$chain_name\", namespace=~\"$namespace\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval])",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}} -\u003e ({{network}})"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "min": 0,
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisLabel": "broadcasts / sec",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 69 },
      "id": 56,
      "isNew": false,
      "span": 0,
      "title": "Average Broadcast Execution Latency",
      "description": "avg time it takes to execute a broadcast",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "rate(aptos_mempool_broadcast_latency_sum{chain_name=~\"$chain_name\", namespace=~\"$namespace\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval]) / rate(aptos_mempool_broadcast_latency_count{chain_name=~\"$chain_name\", namespace=~\"$namespace\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval])",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}} -\u003e ({{network}})"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "s",
          "min": 0,
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisLabel": "secs / broadcast",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 69 },
      "id": 32,
      "isNew": false,
      "span": 0,
      "title": "Average Broadcast Roundtrip Time",
      "description": "average time b/w broadcast sent and ACK coming back for it",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "rate(aptos_shared_mempool_broadcast_roundtrip_latency_sum{chain_name=~\"$chain_name\", namespace=~\"$namespace\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval]) / rate(aptos_shared_mempool_broadcast_roundtrip_latency_count{chain_name=~\"$chain_name\", namespace=~\"$namespace\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval])",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}} -\u003e ({{network}})"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "s",
          "min": 0,
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 69 },
      "id": 50,
      "isNew": false,
      "span": 0,
      "title": "Pending Broadcasts",
      "description": "number of sent broadcasts awaiting an ACK",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "sum by (kubernetes_pod_name, role, network) (aptos_shared_mempool_pending_broadcasts_count{chain_name=~\"$chain_name\", namespace=~\"$namespace\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"})",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}} -\u003e ({{network}})"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisLabel": "# broadcasts",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 77 },
      "id": 106,
      "isNew": false,
      "span": 0,
      "title": "Expired Rebroadcast Rate",
      "description": "rate of broadcasts that are retrying expired braodcasts (that did not get back an ACK in window of time)",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "rate(aptos_shared_mempool_rebroadcast_count{chain_name=~\"$chain_name\", namespace=~\"$namespace\", type=\"expired\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval])",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}} -\u003e {{network}}"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisLabel": "expired / s",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 77 },
      "id": 108,
      "isNew": false,
      "span": 0,
      "title": "Retry Rebroadcast",
      "description": "rate of broadcasts that are retrying past broadcasts that received a retry ACK",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "rate(aptos_shared_mempool_rebroadcast_count{chain_name=~\"$chain_name\", namespace=~\"$namespace\", type=\"retry\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"role\"}[$interval])",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}} -\u003e ({{network}})"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 77 },
      "id": 110,
      "isNew": false,
      "span": 0,
      "title": "Backpressure Broadcast",
      "description": "rate of broadcasts that were executed as a backpressure broadcast",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "rate(aptos_shared_mempool_rebroadcast_count{chain_name=~\"$chain_name\", namespace=~\"$namespace\", type=\"backpressure\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval])",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}} -\u003e {{network}}"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "editable": false,
      "error": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 85 },
      "id": 126,
      "isNew": false,
      "span": 0,
      "title": "End-to-end Latency",
      "transparent": false,
      "type": "row",
      "panels": [],
      "collapsed": false
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 86 },
      "id": 128,
      "isNew": false,
      "span": 0,
      "title": "p10",
      "description": "The time between Mempool receiving the transaction and time to be committed.",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "histogram_quantile(0.10, sum by (kubernetes_pod_name, role, le) (rate(aptos_core_mempool_txn_commit_latency_bucket{chain_name=~\"$chain_name\", namespace=~\"$namespace\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\", stage=\"commit_accepted\"}[$interval])))",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}}"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "s",
          "min": 0,
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 86 },
      "id": 130,
      "isNew": false,
      "span": 0,
      "title": "p50",
      "description": "The time between Mempool receiving the transaction and time to be committed.",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "histogram_quantile(0.50, sum by (kubernetes_pod_name, role, le) (rate(aptos_core_mempool_txn_commit_latency_bucket{chain_name=~\"$chain_name\", namespace=~\"$namespace\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\", stage=\"commit_accepted\"}[$interval])))",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}}"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "s",
          "min": 0,
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 86 },
      "id": 132,
      "isNew": false,
      "span": 0,
      "title": "p90",
      "description": "The time between Mempool receiving the transaction and time to be committed.",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "histogram_quantile(0.90, sum by (kubernetes_pod_name, role, le) (rate(aptos_core_mempool_txn_commit_latency_bucket{chain_name=~\"$chain_name\", namespace=~\"$namespace\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\", stage=\"commit_accepted\"}[$interval])))",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}}"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "s",
          "min": 0,
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 94 },
      "id": 20,
      "isNew": false,
      "span": 0,
      "title": "Consensus",
      "transparent": false,
      "type": "row",
      "panels": [],
      "collapsed": false
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 95 },
      "id": 6,
      "isNew": false,
      "span": 0,
      "title": "Block size",
      "description": "Average size of consensus blocks pulled from mempool",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "rate(aptos_mempool_service_transactions_sum{chain_name=~\"$chain_name\", namespace=~\"$namespace\", type=\"get_block\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval]) / rate(aptos_mempool_service_transactions_count{chain_name=~\"$chain_name\", namespace=~\"$namespace\", type=\"get_block\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval])",
          "intervalFactor": 1,
          "legendFormat": "{{kubernetes_pod_name}}:{{role}}",
          "format": "time_series"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "min": 0,
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisLabel": "avg block size",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 95 },
      "id": 133,
      "isNew": false,
      "span": 0,
      "title": "Block size in bytes",
      "description": "Average size in bytes of consensus blocks pulled from mempool",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "rate(aptos_mempool_service_bytes_get_block_sum{chain_name=~\"$chain_name\", namespace=~\"$namespace\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval]) / rate(aptos_mempool_service_bytes_get_block_count{chain_name=~\"$chain_name\", namespace=~\"$namespace\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval])",
          "intervalFactor": 1,
          "legendFormat": "{{kubernetes_pod_name}}:{{role}}",
          "format": "time_series"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "min": 0,
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisLabel": "avg block size",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 95 },
      "id": 12,
      "isNew": false,
      "span": 0,
      "title": "Avg latency for get_block",
      "description": "Avg time it takes for consensus to pull block from mempool",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "rate(aptos_mempool_service_latency_ms_sum{chain_name=~\"$chain_name\", namespace=~\"$namespace\", type=\"get_block\", kubernetes_pod_name=~\"$kubernetes_pod_name\"}[$interval]) / rate(aptos_mempool_service_latency_ms_count{chain_name=~\"$chain_name\", namespace=~\"$namespace\", type=\"get_block\", kubernetes_pod_name=~\"$kubernetes_pod_name\"}[$interval])",
          "intervalFactor": 1,
          "legendFormat": "{{kubernetes_pod_name}}",
          "format": "time_series"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "s",
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 103 },
      "id": 22,
      "isNew": false,
      "span": 0,
      "title": "Event Processing",
      "transparent": false,
      "type": "row",
      "panels": [],
      "collapsed": false
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 104 },
      "id": 26,
      "isNew": false,
      "span": 0,
      "title": "Incoming events rate",
      "description": "rate of shared mempool events from peers",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "rate(aptos_shared_mempool_events{chain_name=~\"$chain_name\", namespace=~\"$namespace\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval])",
          "intervalFactor": 1,
          "legendFormat": "{{kubernetes_pod_name}}:{{role}} - {{event}}",
          "format": "time_series"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "min": 0,
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisLabel": "events/s",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 104 },
      "id": 122,
      "isNew": false,
      "span": 0,
      "title": "Main loop latency",
      "description": "Duration of each run of the event loop",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "rate(aptos_mempool_main_loop_sum{chain_name=~\"$chain_name\", namespace=~\"$namespace\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval]) / rate(aptos_mempool_main_loop_count{chain_name=~\"$chain_name\", namespace=~\"$namespace\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval])",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}}"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "s",
          "min": 0,
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 104 },
      "id": 36,
      "isNew": false,
      "span": 0,
      "title": "Shared Mempool Task Start Latency",
      "description": "average time it takes for mempool to start an async task",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "rate(aptos_mempool_bounded_executor_spawn_latency_sum{chain_name=~\"$chain_name\", namespace=~\"$namespace\", stage=\"start\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval]) / rate(aptos_mempool_bounded_executor_spawn_latency_count{chain_name=~\"$chain_name\", namespace=~\"$namespace\", stage=\"start\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval])",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}} - {{task}}"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "s",
          "min": 0,
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 112 },
      "id": 54,
      "isNew": false,
      "span": 0,
      "title": "Average VM Validation Latency",
      "description": "avg time it takes to VM-validate txns in a submission",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "rate(aptos_mempool_process_txn_breakdown_latency_sum{chain_name=~\"$chain_name\", namespace=~\"$namespace\", portion=\"vm_validation\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval]) / rate(aptos_mempool_process_txn_breakdown_latency_count{chain_name=~\"$chain_name\", namespace=~\"$namespace\", portion=\"vm_validation\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval])",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}}"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "s",
          "min": 0,
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 112 },
      "id": 98,
      "isNew": false,
      "span": 0,
      "title": "Average DB Read Latency",
      "description": "latency of db read when validating transaction",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "rate(aptos_mempool_process_txn_breakdown_latency_sum{chain_name=~\"$chain_name\", namespace=~\"$namespace\", portion=\"storage_fetch\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval]) / rate(aptos_mempool_process_txn_breakdown_latency_count{chain_name=~\"$chain_name\", namespace=~\"$namespace\", portion=\"storage_fetch\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval])",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}}"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "s",
          "min": 0,
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 112 },
      "id": 52,
      "isNew": false,
      "span": 0,
      "title": "Average Txn Processing Latency",
      "description": "avg time it takes to process incoming transactions, per incoming submission",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "rate(aptos_shared_mempool_request_latency_sum{chain_name=~\"$chain_name\", namespace=~\"$namespace\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval]) / rate(aptos_shared_mempool_request_latency_count{chain_name=~\"$chain_name\", namespace=~\"$namespace\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval])",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}} \u003c- ({{network}} network:{{sender}})"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "s",
          "min": 0,
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisLabel": "sec / txn submission",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 120 },
      "id": 14,
      "isNew": false,
      "span": 0,
      "title": "Avg latency handle commit (accepted)",
      "description": "average time it takes for mempool to process a commit of accepted transactions (sent from state sync)",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "rate(aptos_mempool_service_latency_ms_sum{chain_name=~\"$chain_name\", namespace=~\"$namespace\", type=\"commit_accepted\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval]) / rate(aptos_mempool_service_latency_ms_count{chain_name=~\"$chain_name\", namespace=~\"$namespace\", type=\"commit_accepted\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval])",
          "intervalFactor": 1,
          "legendFormat": "{{kubernetes_pod_name}}:{{role}}",
          "format": "time_series"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "s",
          "min": 0,
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 120 },
      "id": 46,
      "isNew": false,
      "span": 0,
      "title": "Avg latency handle commit (rejected)",
      "description": "avg time it takes to process committed rejected txns",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "rate(aptos_mempool_service_latency_ms_sum{chain_name=~\"$chain_name\", namespace=~\"$namespace\", type=\"commit_rejected\", kubernetes_pod_name=~\"$kubernetes_pod_name\"}[$interval])/rate(aptos_mempool_service_latency_ms_count{chain_name=~\"$chain_name\", namespace=~\"$namespace\", type=\"commit_rejected\", kubernetes_pod_name=~\"$kubernetes_pod_name\"}[$interval])",
          "legendFormat": "{{kubernetes_pod_name}}"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "s",
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 128 },
      "id": 76,
      "isNew": false,
      "span": 0,
      "title": "Errors",
      "transparent": false,
      "type": "row",
      "panels": [],
      "collapsed": false
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 129 },
      "id": 78,
      "isNew": false,
      "span": 0,
      "title": "Mempool Service Timeout",
      "description": "number of timeouts on a mempool service request (from consensus/state sync)",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "rate(aptos_mempool_service_latency_ms_count{chain_name=~\"$chain_name\", namespace=~\"$namespace\", result=\"fail\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval])",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}} - {{type}}"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 129 },
      "id": 80,
      "isNew": false,
      "span": 0,
      "title": "DB error",
      "description": "number of times a DB error occurred",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "rate(aptos_mempool_db_error_count{chain_name=~\"$chain_name\", namespace=~\"$namespace\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval])",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}}"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 129 },
      "id": 82,
      "isNew": false,
      "span": 0,
      "title": "JSON RPC Callback Timeout",
      "description": "number of timeouts in callback to JSON RPC",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "rate(aptos_mempool_json_rpc_callback_fail_count{chain_name=~\"$chain_name\", namespace=~\"$namespace\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval])",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}}"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 7, "w": 8, "x": 0, "y": 137 },
      "id": 84,
      "isNew": false,
      "span": 0,
      "title": "Network Send Fail",
      "description": "number of times a aptos network send failed",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "rate(aptos_mempool_network_send_fail_count{chain_name=~\"$chain_name\", namespace=~\"$namespace\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval])",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}}"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 7, "w": 8, "x": 8, "y": 137 },
      "id": 86,
      "isNew": false,
      "span": 0,
      "title": "VM Reconfiguration Failure",
      "description": "number of times reconfiguration of VM failed",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "rate(aptos_mempool_vm_reconfig_update_fail_count{chain_name=~\"$chain_name\", namespace=~\"$namespace\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval])",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}}"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 7, "w": 8, "x": 16, "y": 137 },
      "id": 88,
      "isNew": false,
      "span": 0,
      "title": "Core Mempool Invariant Violation",
      "description": "number of times core mempool invariant was violated",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "rate(aptos_mempool_core_mempool_invariant_violated_count{chain_name=~\"$chain_name\", namespace=~\"$namespace\", kubernetes_pod_name=\"$kubernetes_pod_name\", role=\"$role\"}[$interval])",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}}"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 144 },
      "id": 118,
      "isNew": false,
      "span": 0,
      "title": "Unexpected Network Messages",
      "description": "rate of unexpected network messages received",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "rate(aptos_mempool_unexpected_network_count{chain_name=~\"$chain_name\", namespace=~\"$namespace\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval])",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}} \u003c- {{network}}:{{peer}}"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 152 },
      "id": 112,
      "isNew": false,
      "span": 0,
      "title": "Garbage Collection",
      "transparent": false,
      "type": "row",
      "panels": [],
      "collapsed": false
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 153 },
      "id": 90,
      "isNew": false,
      "span": 0,
      "title": "Garbage Collection Event Rate",
      "description": "Number of times garbage-collection event occurred (regardless of how many txns were actually removed in the event)",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "rate(aptos_core_mempool_gc_event_count{chain_name=~\"$chain_name\", namespace=~\"$namespace\", type=\"system_ttl\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval])",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}}"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "min": 0,
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisLabel": "events / s",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 153 },
      "id": 104,
      "isNew": false,
      "span": 0,
      "title": "GC Latency",
      "description": "how long a transaction stayed in mempool before being garbage-collected",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "rate(aptos_core_mempool_gc_latency_sum{chain_name=~\"$chain_name\", namespace=~\"$namespace\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval])/rate(aptos_core_mempool_gc_latency_count{chain_name=~\"$chain_name\", namespace=~\"$namespace\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval])",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}}"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 161 },
      "id": 64,
      "isNew": false,
      "span": 0,
      "title": "Network Messages",
      "transparent": false,
      "type": "row",
      "panels": [],
      "collapsed": false
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 162 },
      "id": 119,
      "isNew": false,
      "span": 0,
      "title": "Messages Queued",
      "description": "Messages currently queued to be sent out",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "sum by (kubernetes_pod_name, role) (aptos_mempool_pending_network_events{chain_name=~\"$chain_name\", namespace=~\"$namespace\", state=\"enqueued\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}) - sum by (kubernetes_pod_name, role)  (aptos_mempool_pending_network_events{chain_name=~\"$chain_name\", namespace=~\"$namespace\", state=\"dequeued\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"})",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}}"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 162 },
      "id": 70,
      "isNew": false,
      "span": 0,
      "title": "Messages Enqueued Rate",
      "description": "rate of messages being enqueued to be sent out",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "rate(aptos_mempool_pending_network_events{chain_name=~\"$chain_name\", namespace=~\"$namespace\", state=\"enqueued\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval])",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}}"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 162 },
      "id": 68,
      "isNew": false,
      "span": 0,
      "title": "Messages Dequeued Rate",
      "description": "Rate of messages dequeued from mempool network sender",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "rate(aptos_mempool_pending_network_events{chain_name=~\"$chain_name\", namespace=~\"$namespace\", state=\"dequeued\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval])",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}}"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 170 },
      "id": 66,
      "isNew": false,
      "span": 0,
      "title": "Dropped Messages",
      "description": "number of messages dropped from mempool channel sender",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "aptos_mempool_pending_network_events{chain_name=~\"$chain_name\", namespace=~\"$namespace\", state=\"dropped\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}}"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 170 },
      "id": 114,
      "isNew": false,
      "span": 0,
      "title": "Sent ACKs (backoff/retry)",
      "description": "rate of backoff/retry ACKs sent",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "aptos_shared_mempool_ack_count{chain_name=~\"$chain_name\", namespace=~\"$namespace\", direction=\"sent\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}} -\u003e {{network}} - {{type}}"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    },
    {
      "datasource": { "type": "prometheus", "uid": "${Datasource}" },
      "editable": false,
      "error": false,
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 170 },
      "id": 116,
      "isNew": false,
      "span": 0,
      "title": "ACKs Received",
      "description": "rate of retry/backpressure ACKs received",
      "transparent": false,
      "type": "timeseries",
      "targets": [
        {
          "refId": "A",
          "datasource": { "type": "prometheus", "uid": "${Datasource}" },
          "expr": "rate(aptos_shared_mempool_ack_count{chain_name=~\"$chain_name\", namespace=~\"$namespace\", direction=\"received\", kubernetes_pod_name=~\"$kubernetes_pod_name\", role=~\"$role\"}[$interval])",
          "legendFormat": "{{kubernetes_pod_name}}:{{role}} \u003c- {{network}} - {{type}}"
        }
      ],
      "options": {
        "legend": { "calcs": [], "displayMode": "list", "placement": "bottom" },
        "tooltip": { "mode": "multi" }
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": { "mode": "palette-classic" },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 80 }
            ]
          },
          "custom": {
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "showPoints": "never",
            "spanNulls": false,
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "lineStyle": { "fill": "" },
            "scaleDistribution": { "type": "linear" },
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          }
        }
      }
    }
  ],
  "rows": null,
  "templating": {
    "list": [
      {
        "name": "Datasource",
        "type": "datasource",
        "datasource": null,
        "refresh": 1,
        "options": [],
        "includeAll": false,
        "allFormat": "",
        "allValue": "",
        "multi": false,
        "multiFormat": "",
        "query": "prometheus",
        "regex": "",
        "current": { "text": ["Remote Prometheus Devinfra"], "value": "Remote Prometheus Devinfra" },
        "label": "",
        "hide": 0,
        "sort": 0
      },
      {
        "name": "namespace",
        "type": "query",
        "datasource": { "type": "prometheus", "uid": "${Datasource}" },
        "refresh": 1,
        "options": [],
        "includeAll": false,
        "allFormat": "",
        "allValue": "",
        "multi": false,
        "multiFormat": "",
        "query": { "query": "label_values(namespace)", "refId": "Prometheus-chain-name-Variable-Query" },
        "regex": "",
        "current": { "text": ["forge-e2e-pr-4246"], "value": "forge-e2e-pr-4246" },
        "label": "",
        "hide": 0,
        "sort": 1
      },
      {
        "name": "chain_name",
        "type": "query",
        "datasource": { "type": "prometheus", "uid": "${Datasource}" },
        "refresh": 1,
        "options": [],
        "includeAll": false,
        "allFormat": "",
        "allValue": "",
        "multi": false,
        "multiFormat": "",
        "query": { "query": "label_values(chain_name)", "refId": "Prometheus-chain-name-Variable-Query" },
        "regex": "",
        "current": { "text": ["forge-big-0"], "value": "forge-big-0" },
        "label": "",
        "hide": 0,
        "sort": 1
      },
      {
        "name": "kubernetes_pod_name",
        "type": "query",
        "datasource": { "type": "prometheus", "uid": "${Datasource}" },
        "refresh": 1,
        "options": [],
        "includeAll": true,
        "allFormat": "",
        "allValue": ".*",
        "multi": true,
        "multiFormat": "",
        "query": {
          "query": "label_values(kubernetes_pod_name)",
          "refId": "Remote Prometheus Devinfra-kubernetes_pod_name-Variable-Query"
        },
        "regex": "",
        "current": { "text": ["All"], "value": ["$__all"] },
        "label": "",
        "hide": 0,
        "sort": 0
      },
      {
        "name": "role",
        "type": "query",
        "datasource": { "type": "prometheus", "uid": "${Datasource}" },
        "refresh": 1,
        "options": [],
        "includeAll": true,
        "allFormat": "",
        "allValue": "",
        "multi": true,
        "multiFormat": "",
        "query": { "query": "label_values(role)", "refId": "Remote Prometheus Devinfra-role-Variable-Query" },
        "regex": "",
        "current": { "text": ["validator"], "value": ["validator"] },
        "label": "",
        "hide": 0,
        "sort": 0
      },
      {
        "name": "interval",
        "type": "interval",
        "auto": true,
        "auto_count": 30,
        "datasource": null,
        "refresh": 2,
        "options": [
          { "text": "auto", "value": "$__auto_interval_interval", "selected": true },
          { "text": "1m", "value": "1m", "selected": false },
          { "text": "5m", "value": "5m", "selected": false },
          { "text": "10m", "value": "10m", "selected": false },
          { "text": "30m", "value": "30m", "selected": false },
          { "text": "1h", "value": "1h", "selected": false },
          { "text": "6h", "value": "6h", "selected": false },
          { "text": "12h", "value": "12h", "selected": false },
          { "text": "1d", "value": "1d", "selected": false },
          { "text": "7d", "value": "7d", "selected": false },
          { "text": "14d", "value": "14d", "selected": false },
          { "text": "30d", "value": "30d", "selected": false }
        ],
        "includeAll": false,
        "allFormat": "",
        "allValue": "",
        "multi": false,
        "multiFormat": "",
        "query": "1m,5m,10m,30m,1h,6h,12h,1d,7d,14d,30d",
        "regex": "",
        "current": { "text": ["auto"], "value": "$__auto_interval_interval" },
        "label": "",
        "hide": 0,
        "sort": 0
      }
    ]
  },
  "annotations": {
    "list": [
      {
        "name": "Annotations \u0026 Alerts",
        "datasource": { "type": "grafana", "uid": "-- Grafana --" },
        "showLine": false,
        "iconColor": "rgba(0, 211, 255, 1)",
        "lineColor": "",
        "iconSize": 0,
        "enable": true,
        "query": "",
        "expr": "",
        "step": "",
        "textField": "",
        "textFormat": "",
        "titleFormat": "",
        "tagsField": "",
        "tags": null,
        "tagKeys": "",
        "type": "dashboard"
      },
      {
        "name": "Annotations \u0026 Alerts",
        "datasource": { "type": "datasource", "uid": "grafana" },
        "showLine": false,
        "iconColor": "rgba(0, 211, 255, 1)",
        "lineColor": "",
        "iconSize": 0,
        "enable": true,
        "query": "",
        "expr": "",
        "step": "",
        "textField": "",
        "textFormat": "",
        "titleFormat": "",
        "tagsField": "",
        "tags": null,
        "tagKeys": "",
        "type": "dashboard"
      }
    ]
  },
  "refresh": false,
  "schemaVersion": 37,
  "version": 43,
  "links": [
    {
      "title": "Other Dashboards",
      "type": "dashboards",
      "asDropdown": true,
      "icon": "external link",
      "includeVars": true,
      "keepTime": true
    }
  ],
  "time": { "from": "2022-09-16T18:16:31.000Z", "to": "2022-09-16T18:32:16.000Z" },
  "timepicker": {
    "refresh_intervals": ["10s", "30s", "1m", "5m", "15m", "30m", "1h", "2h", "1d"],
    "time_options": ["5m", "15m", "1h", "6h", "12h", "24h", "2d", "7d", "30d"]
  },
  "graphTooltip": 1
}
